;; Use this function to load all relevant files by name
(defun load-user-file (file)
  (interactive "f")
  "Load a file in current user's configuration directory"
  (load-file (expand-file-name file user-init-dir)))
;; Use this function to add a directory to the path
(defun user-load-path-add (file)
  (interactive "f")
  "Add a folder in the current user's configuration directory to the load-path"
  (add-to-list 'load-path (expand-file-name file user-init-dir)))

;; Load packages
(load-user-file "custompackages.el")

;; Use Evil modal editing
(require 'evil)
(evil-mode 1)

;; Use Ido Mode
(setq ido-enable-flex-matching t)
(setq ido-everywhere t)
(setq ido-save-directory-list-file (expand-file-name "cache/ido.last" user-init-dir))
(ido-mode 1)

;; Use smooth scrolling
(require 'smooth-scrolling)

;; Setup emacs for Drupal development
(require 'web-mode)

;;; Setup drupal-mode and related files
(load-user-file "contrib/drupal/autostart.el")

;;; Setup Drupal file associations
(add-to-list 'auto-mode-alist
             '("\\.\\(php\\|inc\\|module\\|test\\|install\\|theme\\)$" . drupal-mode))
;(add-to-list 'auto-mode-alist '("\\.\\(php\\|inc\\)$" . php-mode))
(add-to-list 'auto-mode-alist
             '("\\.info" . conf-windows-mode))

;; Use Solarized theme
(load-theme 'solarized-light-theme t)

;; Show line numbers always
;(require 'linum)
;(global-linum-mode)

;; Various configurations
(set-default-font "Ubuntu Mono-12")
(custom-set-variables
 '(global-linum-mode t)         ; show line numbers on the side
 '(column-number-mode t)        ; show column number in modeline
 '(scroll-bar-mode nil)         ; hide scrollbar
 '(tool-bar-mode nil)           ; hide toolbar
 '(menu-bar-mode nil)           ; hide menubar
 '(inhibit-startup-screen t)    ; don't display the startup screen
 '(initial-scratch-message "")  ; don't show anything in the scratch buffer
 '(vc-handled-backends nil)     ; disable version control
 '(make-backup-files nil))      ; don't make backup files

(setq-default indent-tabs-mode nil) ; disable inserting tab characters

;; Put autosave/backup files in one place
;(defvar user-backup-directory (expand-file-name "backups" user-init-dir))
;(setq backup-directory-alist '(("." . user-backup-directory)))
(setq auto-save-list-file-prefix
      (expand-file-name "autosaves/" user-init-dir))
(setq auto-save-file-name-transforms
      `((".*" ,(concat (expand-file-name "autosaves" user-init-dir) "/\\1") t)))

;; Load extra config files
(load-user-file "functions.el")
(load-user-file "bindings.el")
